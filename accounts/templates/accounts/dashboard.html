<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Admin â€¢ Users</title>
  <!-- Tailwind via CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    // Optional: tiny Tailwind config to improve focus states & fonts
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            sans: ["Inter", "ui-sans-serif", "system-ui", "-apple-system", "Segoe UI", "Roboto", "Helvetica", "Arial", "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"],
          },
          boxShadow: {
            soft: "0 1px 2px 0 rgb(0 0 0 / 0.05), 0 1px 3px 0 rgb(0 0 0 / 0.1)",
          },
        }
      }
    }
  </script>
</head>
<body class="$1 min-h-screen flex flex-col">
  <!-- Top bar -->
  <header class="bg-gradient-to-r from-emerald-600 to-teal-600 text-white shadow-soft">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 py-4 flex items-center justify-between">
      <h1 class="text-lg sm:text-2xl font-semibold tracking-tight flex items-center gap-2">
        <span class="inline-flex h-8 w-8 items-center justify-center rounded-lg bg-white/15 ring-1 ring-white/25">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" d="M3 7l9-4 9 4-9 4-9-4zm0 0v10l9 4 9-4V7"/></svg>
        </span>
        <span>Admin Dashboard</span>
      </h1>

      <div class="flex items-center gap-3">
        {% if user.is_authenticated %}
          <a href="{% url 'accounts:profile' %}" class="flex items-center gap-3 text-sm">
            {% if profile and profile.avatar %}
              <img src="{{ profile.avatar.url }}" alt="{{ user.username }}'s avatar" class="h-8 w-8 rounded-full object-cover" />
            {% else %}
              <div class="h-8 w-8 rounded-full bg-white/15 grid place-items-center text-white font-semibold">{{ user.username|slice:":1"|upper }}</div>
            {% endif %}
            <span class="hidden sm:inline">{{ user.username }}</span>
          </a>
        {% endif %}
        <a href="{% url 'accounts:create_user' %}" class="group inline-flex items-center gap-2 rounded-xl px-3.5 py-2 bg-white/10 hover:bg-white/20 ring-1 ring-white/30 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-white/70 focus-visible:ring-offset-emerald-600 transition">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4v16m8-8H4"/></svg>
          <span class="font-medium">Add user</span>
        </a>
                    <a href="{% url 'accounts:home' %}" class="inline-flex items-center gap-2 rounded-xl px-3 py-1.5 bg-white/15 hover:bg-white/25 ring-1 ring-white/30 transition">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" d="M3 12l9-9 9 9M4 10v10a2 2 0 002 2h4m8-12v10a2 2 0 01-2 2h-4"/></svg>
              Add Task
        </a>
        <form method="post" action="{% url 'accounts:logout' %}">
          {% csrf_token %}
          <button type="submit" class="inline-flex items-center gap-2 rounded-xl px-3.5 py-2 bg-white text-gray-900 hover:bg-amber-300 ring-1 ring-white/30 shadow-soft focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-200 transition">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" d="M15 12H3m12 0l-4-4m4 4l-4 4M21 4v16"/></svg>
            <span class="font-medium">Logout</span>
          </button>
        </form>
      </div>
    </div>
  </header>

  <main class="$1 flex-1 m-3">
    <!-- Flash messages / alerts -->
    {% if messages %}
      <section aria-live="polite" class="space-y-2" id="messages">
        {% for m in messages %}
          {% if forloop.last %}
            <div class="{% if 'success' in m.tags %}p-3 rounded-xl text-sm font-medium ring-1 flex items-start gap-2 bg-emerald-50 text-emerald-900 ring-emerald-200{% elif 'error' in m.tags %}p-3 rounded-xl text-sm font-medium ring-1 flex items-start gap-2 bg-rose-50 text-rose-900 ring-rose-200{% elif 'warning' in m.tags %}p-3 rounded-xl text-sm font-medium ring-1 flex items-start gap-2 bg-amber-50 text-amber-900 ring-amber-200{% else %}p-3 rounded-xl text-sm font-medium ring-1 flex items-start gap-2 bg-sky-50 text-sky-900 ring-sky-200{% endif %} message-item">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mt-0.5 flex-none" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" d="M13 16h-1v-4h-1m1-4h.01M12 19a7 7 0 110-14 7 7 0 010 14z"/></svg>
              <p class="ml-2">{{ m }}</p>
              <button type="button" class="ml-auto text-sm text-gray-600 close-message" aria-label="Dismiss message">&times;</button>
            </div>
          {% endif %}
        {% endfor %}
      </section>

      <script>
        (function(){
          // Auto-hide and dismissible flash messages
          var container = document.getElementById('messages');
          if (!container) return;
          var items = container.querySelectorAll('.message-item');
          items.forEach(function(el){
            // auto-hide after 5s
            var timer = setTimeout(function(){
              el.style.transition = 'opacity 250ms ease-out, height 250ms ease-out';
              el.style.opacity = '0';
              setTimeout(function(){ try{ el.remove(); }catch(e){} }, 300);
            }, 5000);

            var btn = el.querySelector('.close-message');
            if (btn){
              btn.addEventListener('click', function(){
                clearTimeout(timer);
                el.style.transition = 'opacity 200ms ease-out, height 200ms ease-out';
                el.style.opacity = '0';
                setTimeout(function(){ try{ el.remove(); }catch(e){} }, 220);
              });
            }
          });
        })();
      </script>
    {% endif %}

    <!-- KPI Cards -->
    <section aria-label="Key metrics" class=" mt-4 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">
      <article class="bg-white rounded-2xl shadow-soft p-5 ring-1 ring-gray-100">
        <div class="flex items-center justify-between">
          <div>
            <p class="text-xs uppercase tracking-wide text-gray-500">Total users</p>
            <p class="mt-1 text-3xl font-bold tabular-nums">{{ total_users }}</p>
          </div>
          <div class="p-2 rounded-xl bg-emerald-50 text-emerald-700">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" d="M17 20h5v-2a4 4 0 00-3-3.87M9 20H4v-2a4 4 0 013-3.87m3-4a4 4 0 110-8 4 4 0 010 8zm6 0a4 4 0 100-8 4 4 0 000 8z"/></svg>
          </div>
        </div>
      </article>

      <article class="bg-white rounded-2xl shadow-soft p-5 ring-1 ring-gray-100">
        <div class="flex items-center justify-between">
          <div>
            <p class="text-xs uppercase tracking-wide text-gray-500">Active users</p>
            <p class="mt-1 text-3xl font-bold tabular-nums">{{ active_users }}</p>
          </div>
          <div class="p-2 rounded-xl bg-sky-50 text-sky-700">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7"/></svg>
          </div>
        </div>
      </article>

      <article class="bg-white rounded-2xl shadow-soft p-5 ring-1 ring-gray-100">
        <div class="flex items-center justify-between">
          <div>
            <p class="text-xs uppercase tracking-wide text-gray-500">Blocked users</p>
            <p class="mt-1 text-3xl font-bold tabular-nums">{{ blocked_users }}</p>
          </div>
          <div class="p-2 rounded-xl bg-rose-50 text-rose-700">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" d="M18.364 5.636a9 9 0 11-12.728 0m12.728 0L5.636 18.364"/></svg>
          </div>
        </div>
      </article>

      <article class="bg-white rounded-2xl shadow-soft p-5 ring-1 ring-gray-100">
        <div class="flex items-center justify-between">
          <div>
            <p class="text-xs uppercase tracking-wide text-gray-500">Staff users</p>
            <p class="mt-1 text-3xl font-bold tabular-nums">{{ staff_users }}</p>
          </div>
          <div class="p-2 rounded-xl bg-indigo-50 text-indigo-700">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" d="M12 12c2.21 0 4-1.79 4-4S14.21 4 12 4 8 5.79 8 8s1.79 4 4 4zm0 2c-3.314 0-6 1.686-6 3.75V20h12v-2.25C18 15.686 15.314 14 12 14z"/></svg>
          </div>
        </div>
      </article>
    </section>

    <!-- Search -->
    <section aria-label="Search users" class="mt-4 mb-6">
      <form method="get" class="flex flex-col sm:flex-row gap-2">
        <div class="relative flex-1">
          <label for="q" class="sr-only">Search username or email</label>
          <span class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-400" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-4.35-4.35M10 18a8 8 0 100-16 8 8 0 000 16z"/></svg>
          </span>
          <input id="q" type="text" name="q" value="{{ q }}" placeholder="Search username or emailâ€¦" class="w-full pl-10 pr-10 py-2 rounded-xl border border-gray-300 focus:outline-none focus:ring-2 focus:ring-emerald-500 placeholder:text-gray-400" />
          {% if q %}
            <a href="{% url 'accounts:dashboard' %}" class="absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-700" aria-label="Reset search">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"/></svg>
            </a>
          {% endif %}
        </div>
        <div class="flex items-center gap-3">
          <button class="rounded-xl px-4 py-2 bg-gray-900 text-white font-medium hover:bg-gray-800 focus:outline-none focus-visible:ring-2 focus-visible:ring-gray-300">Search</button>
        </div>
      </form>
    </section>

    <!-- Users table -->
    <section aria-label="Users list" class="bg-white rounded-2xl shadow-soft ring-1 ring-gray-100 overflow-hidden">
      <div class="overflow-x-auto max-h-[70vh] scrollbar-thin">
        <table class="min-w-full">
          <caption class="sr-only">All users with role, status, join date, and actions</caption>
          <thead class="bg-gray-50 sticky top-0 z-10">
            <tr class="text-left text-xs font-semibold text-gray-600">
              <th scope="col" class="px-6 py-3">Username</th>
              <th scope="col" class="px-6 py-3">Email</th>
              <th scope="col" class="px-6 py-3">Role / Status</th>
              <th scope="col" class="px-6 py-3">Joined</th>
              <th scope="col" class="px-6 py-3">Assign Group</th>
              <th scope="col" class="px-6 py-3 text-right">Actions</th>
            </tr>
          </thead>
          <tbody class="divide-y divide-gray-100">
            {% for u in users %}
              <tr class="hover:bg-gray-50">
                <td class="px-6 py-3 font-medium break-words">{{ u.username }}</td>
                <td class="px-6 py-3 text-gray-700 break-words">{{ u.email }}</td>

                <!-- Role / Status badges -->
                <td class="px-6 py-3">
                  <div class="flex flex-wrap items-center gap-2">
                    {% if u.is_active %}
                      <span class="inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-semibold bg-emerald-100 text-emerald-800 ring-1 ring-emerald-200">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-3.5 w-3.5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7"/></svg>
                        Active
                      </span>
                    {% else %}
                      <span class="inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-semibold bg-rose-100 text-rose-800 ring-1 ring-rose-200">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-3.5 w-3.5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" d="M18.364 5.636a9 9 0 11-12.728 0m12.728 0L5.636 18.364"/></svg>
                        Blocked
                      </span>
                    {% endif %}

                    {% if u.is_superuser or u.id in admin_group_ids %}
                      <span class="inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-semibold bg-indigo-100 text-indigo-800 ring-1 ring-indigo-200">Admin</span>
                    {% elif not u.is_superuser and u.id in user_group_ids %}
                      <span class="inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-semibold bg-slate-100 text-slate-800 ring-1 ring-slate-200">User</span>
                    {% elif not u.is_superuser and not u.id in admin_group_ids and not u.id in user_group_ids %}
                      <span class="inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-semibold bg-gray-100 text-gray-700 ring-1 ring-gray-200">None</span>
                    {% endif %}

                    {% if u.is_staff %}
                      <span class="inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-semibold bg-indigo-50 text-indigo-700 ring-1 ring-indigo-100">Staff</span>
                    {% endif %}
                  </div>
                </td>

                <td class="px-6 py-3 text-sm text-gray-600 whitespace-nowrap tabular-nums">{{ u.date_joined|date:"Y-m-d H:i" }}</td>

                <!-- Assign Group -->
                <td class="px-6 py-3">
                  <form method="post" action="{% url 'accounts:assign_group' u.id %}" class="flex items-center gap-2">
                    {% csrf_token %}
                    <label for="group-{{ u.id }}" class="sr-only">Assign group for {{ u.username }}</label>
                    <select id="group-{{ u.id }}" name="group" class="border border-gray-300 rounded-lg px-2 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-sky-500">
                      <option value="admin" {% if u.is_superuser or u.id in admin_group_ids %}selected{% endif %}>Admin</option>
                      <option value="user" {% if not u.is_superuser and u.id in user_group_ids %}selected{% endif %}>User</option>
                      <option value="none" {% if not u.is_superuser and not u.id in admin_group_ids and not u.id in user_group_ids %}selected{% endif %}>None</option>
                    </select>
                    <button type="submit" class="px-3 py-1.5 rounded-lg bg-sky-600 text-white text-sm hover:bg-sky-700 focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-300">Save</button>
                  </form>
                </td>

                <!-- Actions -->
                <td class="px-6 py-3">
                  <div class="flex justify-end gap-2">
                    {% if u.is_active %}
                      <form method="post" action="{% url 'accounts:block_user' u.id %}" onsubmit="return confirm('Block this user?');">
                        {% csrf_token %}
                        <button class="inline-flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-amber-600 text-white text-sm shadow-soft hover:bg-amber-700 focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300">
                          <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" d="M18.364 5.636a9 9 0 11-12.728 0m12.728 0L5.636 18.364"/></svg>
                          <span class="hidden sm:inline">Block</span>
                        </button>
                      </form>
                    {% else %}
                      <form method="post" action="{% url 'accounts:unblock_user' u.id %}" onsubmit="return confirm('Unblock this user?');">
                        {% csrf_token %}
                        <button class="inline-flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-emerald-600 text-white text-sm shadow-soft hover:bg-emerald-700 focus:outline-none focus-visible:ring-2 focus-visible:ring-emerald-300">
                          <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7"/></svg>
                          <span class="hidden sm:inline">Unblock</span>
                        </button>
                      </form>
                    {% endif %}

                    <form method="post" action="{% url 'accounts:delete_user' u.id %}" onsubmit="return confirm('Delete this user permanently?');">
                      {% csrf_token %}
                      <button class="inline-flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-rose-600 text-white text-sm shadow-soft hover:bg-rose-700 focus:outline-none focus-visible:ring-2 focus-visible:ring-rose-300">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6M9 7h6m-7 0V5a2 2 0 012-2h2a2 2 0 012 2v2"/></svg>
                        <span class="hidden sm:inline">Delete</span>
                      </button>
                    </form>
                  </div>
                </td>
              </tr>
            {% empty %}
              <tr>
                <td class="px-6 py-16 text-center text-gray-500" colspan="6">
                  <div class="mx-auto max-w-md flex flex-col items-center gap-3">
                    <span class="inline-flex h-12 w-12 items-center justify-center rounded-2xl bg-gray-100 ring-1 ring-gray-200">
                      <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-gray-400" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" d="M3 7l9-4 9 4-9 4-9-4zm0 0v10l9 4 9-4V7"/></svg>
                    </span>
                    <p class="text-sm">No users found. Try adjusting your search.</p>
                    {% if q %}
                      <a href="{% url 'accounts:dashboard' %}" class="inline-flex items-center gap-2 rounded-lg px-3 py-2 bg-gray-900 text-white text-sm hover:bg-gray-800">Reset search</a>
                    {% endif %}
                  </div>
                </td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>

      <!-- Pagination footer -->
      <div class="flex flex-col sm:flex-row items-center justify-between gap-3 p-4 border-t bg-gray-50">
        <form method="get" class="flex items-center gap-2">
          {% if q %}<input type="hidden" name="q" value="{{ q }}">{% endif %}
          <label for="per_page" class="text-sm text-gray-600">Rows per page</label>
          <select id="per_page" name="per_page" class="border border-gray-300 rounded-lg px-2 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500" onchange="this.form.submit()">
            <option value="10"  {% if per_page|add:0 == 10 %}selected{% endif %}>10</option>
            <option value="25"  {% if per_page|add:0 == 25 %}selected{% endif %}>25</option>
            <option value="50"  {% if per_page|add:0 == 50 %}selected{% endif %}>50</option>
            <option value="100" {% if per_page|add:0 == 100 %}selected{% endif %}>100</option>
          </select>
        </form>

        {% if page_obj %}
          <nav class="flex items-center gap-2" aria-label="Pagination">
            <span class="text-sm text-gray-600">Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}</span>
            <div class="flex items-center gap-1">
              {% if page_obj.has_previous %}
                <a class="px-3 py-1.5 rounded-lg ring-1 ring-gray-300 bg-white text-sm hover:bg-gray-100" href="?{% if q %}q={{ q }}&{% endif %}per_page={{ per_page }}&page=1">First</a>
                <a class="px-3 py-1.5 rounded-lg ring-1 ring-gray-300 bg-white text-sm hover:bg-gray-100" href="?{% if q %}q={{ q }}&{% endif %}per_page={{ per_page }}&page={{ page_obj.previous_page_number }}">Prev</a>
              {% else %}
                <span class="px-3 py-1.5 rounded-lg ring-1 ring-gray-200 bg-gray-100 text-gray-400 text-sm">First</span>
                <span class="px-3 py-1.5 rounded-lg ring-1 ring-gray-200 bg-gray-100 text-gray-400 text-sm">Prev</span>
              {% endif %}

              {% for p in page_obj.paginator.page_range %}
                {% if p >= page_obj.number|add:-2 and p <= page_obj.number|add:2 %}
                  {% if p == page_obj.number %}
                    <span class="px-3 py-1.5 rounded-lg bg-gray-900 text-white text-sm">{{ p }}</span>
                  {% else %}
                    <a class="px-3 py-1.5 rounded-lg ring-1 ring-gray-300 bg-white text-sm hover:bg-gray-100" href="?{% if q %}q={{ q }}&{% endif %}per_page={{ per_page }}&page={{ p }}">{{ p }}</a>
                  {% endif %}
                {% endif %}
              {% endfor %}

              {% if page_obj.has_next %}
                <a class="px-3 py-1.5 rounded-lg ring-1 ring-gray-300 bg-white text-sm hover:bg-gray-100" href="?{% if q %}q={{ q }}&{% endif %}per_page={{ per_page }}&page={{ page_obj.next_page_number }}">Next</a>
                <a class="px-3 py-1.5 rounded-lg ring-1 ring-gray-300 bg-white text-sm hover:bg-gray-100" href="?{% if q %}q={{ q }}&{% endif %}per_page={{ per_page }}&page={{ page_obj.paginator.num_pages }}">Last</a>
              {% else %}
                <span class="px-3 py-1.5 rounded-lg ring-1 ring-gray-200 bg-gray-100 text-gray-400 text-sm">Next</span>
                <span class="px-3 py-1.5 rounded-lg ring-1 ring-gray-200 bg-gray-100 text-gray-400 text-sm">Last</span>
              {% endif %}
            </div>
          </nav>
        {% endif %}
      </div>
    </section>
  </main>

  <!-- Footer -->
  <footer class="mt-10">
    <!-- thin rainbow top bar -->
    <div class="h-1 w-full bg-gradient-to-r from-fuchsia-500 via-amber-400 to-emerald-500"></div>

    <div class="bg-gradient-to-r from-indigo-600 via-fuchsia-600 to-emerald-600 text-white">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 text-sm">
        <div class="flex flex-col sm:flex-row items-center justify-between gap-4 py-6">
          <p class="opacity-90">&copy; {% now "Y" %} <span class="font-semibold">ToDo</span>. All rights reserved.</p>

          <nav class="flex items-center gap-3 flex-wrap">
            <a href="{% url 'accounts:home' %}" class="inline-flex items-center gap-2 rounded-xl px-3 py-1.5 bg-white/15 hover:bg-white/25 ring-1 ring-white/30 transition">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" d="M3 12l9-9 9 9M4 10v10a2 2 0 002 2h4m8-12v10a2 2 0 01-2 2h-4"/></svg>
              Add Task
            </a>

            <a href="{% url 'accounts:dashboard' %}" class="inline-flex items-center gap-2 rounded-xl px-3 py-1.5 bg-white/15 hover:bg-white/25 ring-1 ring-white/30 transition">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" d="M12 22s8-4 8-10V6l-8-4-8 4v6c0 6 8 10 8 10z"/></svg>
              Admin
            </a>

            <form method="post" action="{% url 'accounts:logout' %}" class="inline">
              {% csrf_token %}
              <button type="submit" class="inline-flex items-center gap-2 rounded-xl px-3 py-1.5 bg-white text-gray-900 hover:bg-amber-300 hover:text-gray-900 shadow-sm transition">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" d="M15 12H3m12 0l-4-4m4 4l-4 4M21 4v16"/></svg>
                Logout
              </button>
            </form>
          </nav>
        </div>
      </div>
    </div>
  </footer>
</body>
</html>
